# Исследование оттока клиентов банка

В проекте представлено решение проблемы повышенной отточности клиентов банка путем выделения сегментов клиентов, наиболее склонных к оттоку, и выдвижения рекомендаций по их удержанию на основании особенностей выделенных групп.
Под оттоком в рамках проекта понимается полное прекращение взаимодействия клиента с банком и закрытие им всех имеющихся в банке продуктов.

Исследование выполнено в Jupyter Notebook на Python, использованные библиотеки: pandas, numpy, sklearn, scipy, matplotlib, seaborn.
Исходные данные представлены в файле формата csv, содержащем сведения о всех актуальных клиентах.

Далее приведены основные результаты каждого из этапов исследования.

----------
### Изучение данных и предобработка

- К анализу было представлено 10000 строк о клиентах банка с 12 уникальными признаками. Данные, представленные в столбцах, лежат в рамках адекватных значений. Явных ошибок не обнаружено.
- Среди всех действующих клиентов 18,2% попали в отток, т.е. изъявили желание об уходе из банка.
- Проведено кодирование категориальных признаки с наименованием города и полом с помощью фиктивных переменных.
- Выявлено, что пропуски в столбце с балансом имеют тип MAR. Пропуски могли возникнуть из-за операций, которые клиенты недавно проводили с недвижимостью, либо из-за того, что сведения в столбце с количеством баллов недвижимости equity подгружаются, вероятно, с других ресурсов, но из-за сбоев в рамках данного процесса, в equity автоматически устанавливается нулевое значение, а в столбце с балансом, ввиду особенностей процессов обработки, проставляется пропуск.
- Найдены строки-дубликаты по идентификатору user_id (в количестве 12 строк): выдвинуто предположение, что user_id клиентов продублировался в базах данных двух разных городов - Ярославля и Рыбинска. Данные строки были удалены, а в "строках-оригиналах" указаны оба города, в базах которых есть клиент; в столбце с возрастом age указана имеющаяся информация о возрасте.
- Остальные строки-псевдо-дубликаты (в количестве 61 строки) - уникальные клиенты, для которых ошибочно указан одинаковый идентификатор user_id в базах данных банков Ярославля и Рыбинска. Во избежание ошибок в дальнейшем, значения user_id переприсвоены для всех клиентов значениями индексов датафрейма.
- Оставшиеся пропуски в столбце с возрастом заполнены медианным значением возраста. Такое заполнение пропусков не внесло ошибок в данные, поскольку количество таких пропусков незначительно (менее 0.5% от общего количества строк).
- Пропуски в балансе balance заполнены с использованием модели линейной регрессии, в качестве признаков переданы: ожидаемый доход est_salary, кредитный рейтинг score и балл недвижимости equity.
- Удалены слишком выбивающиеся значения по балансу и ожидаемому доходу.
- Проведена замена типов данных, в результате чего количество используемой памяти удалось сократить почти вдвое.

----------
### Исследовательский анализ данных

Построены портреты типичных клиентов в разрезе отточности. Выявлено, что, в среднем, отточные клиенты - мужчины около 40 лет, с балансом на счетах около 800 тысяч у.е. и более дорогой недвижимостью во владении, активно пользующиеся различными продуктами банка, с кредитным рейтингом чуть выше, чем у всех клиентов. В свою очередь, портрет типичного удовлетворенного клиента выглядит так: женщина 43 лет из Ярославля с доходами около 115000 у.е., балансом на счетах - чуть выше полумиллиона, пользующаяся кредитной и дебетовой картой, имеющая во владении объект недвижимости.

Выявлены следующие факторы повышенного оттока:
- Возраст от 23 до 31 года, а также от 49 до 60 лет.
- Баланс на счетах - свыше миллиона у.е.
- Предполагаемый доход - выше 100 тысяч у.е.
- Пол - мужской.
- Нет кредитной карты.
- Есть активность за последние 3 месяца.
- Количество продуктов более 2.
- Высокий балл недвижимости.
- Кроме того, обнаружена средняя корреляция: между кредитным рейтингом, балансом и баллом недвижимости; между возрастом с количеством продуктов и оценочным уровнем дохода клиента.

----------
### Выдвижение и проверка статистических гипотез

- Доходы отточных клиентов превышают доходы неотточных.
- Количество продуктов, используемых клиентами, влияет на фактор оттока.
- Балл недвижимости клиента также влияет на фактор оттока.

----------
### Сегментация клиентов

- Проведено сегментирование на 5 групп клиентов, позволившее покрыть 56,1% всех отточных клиентов. Сегментирование достаточно эффективно, т.к. общая доля отточных клиентов внутри суммы выделенных сегментов составила 47,4%.
- Выделены следующие сегменты, отсортированные по приоритету их обработки работниками банка (приоритет учитывает долю отточных клиентов в сегменте и относительную ценность клиентов для бизнеса):
* Клиенты с баллом недвижимости выше 3 баллов, кредитными рейтингом выше 850 баллов, доходами свыше 110 тыс. у.е. и проявлявшие активность за последние 3 месяца.
* Клиенты до 60 лет, имеющие 3 и более продуктов в банке, а баланс на счетах - свыше 850 тысяч у.е.
* Клиенты до 60 лет, также имеющие 3 и более продуктов в банке, но пользующиеся кредитной картой.
* Клиенты-мужчины в возрасте от 25 до 35 лет, с баллом недвижимости выше 3.
* Оставшиеся клиенты с характеристиками из первого сегмента данного списка, но без ограничений по доходам.

----------
### Выводы и рекомендации менеджменту банка по итогам исследования

* Следует проанализировать последние обновления условий по дебетовым и кредитным картам, в том числе комиссий за переводы и прочие операции: что-то смутило финансово обеспеченных клиентов, в результате чего около 2/3 тех из них, кто пользовался банком за последние 3 месяца, попали в отток. Если такие действия действительно имели место быть, то чтобы остановить отток, следует пересмотреть политику банка в данных вопросах.

* Возможно, клиенты выплачивают ипотеку по довольно высоким процентам, а среди банков-конкурентов появилось намного более выгодное предложение, в результате чего клиент принимает решение о рефинансировании кредита в другом банке. Причиной этого могло, например, стать изменение ключевой ставки Центрального банка или ситуации на рынке недвижимости. Чтобы уменьшить отточность и увеличить лояльность клиентов с ипотекой, стоит самостоятельно предложить таким клиентам снизить ставку по кредиту, чтобы не допустить его уход к конкуренту.

* Чтобы уменьшить отточность среди клиентов до 60 лет, имеющих больше 850 тыс. у.е. на счетах и более 3 продуктов, стоит предложить им более выгодные условия в сравнении с конкурентами: например, можно увеличить процентную ставку по вкладам свыше миллиона на несколько долей процентных пунктов (в зависимости от текущих значений и предложений конкурентов), чтобы добиться большей привлекательности таких продуктов для клиента.

* Для уменьшения отточности среди клиентов до 60 лет с кредитками и использующими более 3 продуктов банка, можно увеличить кредитный лимит для клиентов без просрочек и с кредитным рейтингом выше среднего: это позволит увеличить лояльность данного сегмента клиентов и снизит шанс их оттока.

* Для удержания клиентов-мужчин в возрасте от 25 до 35 лет с баллом недвижимости выше 3, можно провести опрос о функционале приложения банка: например, попросить оставить отзыв о том, какий функций не хватает этим клиентам, или что они находят не особо удобным. Данная обратная связь может оказаться очень ценной для банка и позволит удержать данный сегмент.
